{"ast":null,"code":"import _slicedToArray from \"/Users/anastasiia/Documents/GitHub/weather-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/anastasiia/Documents/GitHub/weather-app/src/Search.js\";\nimport React, { useState, CSSProperties, useEffect } from 'react';\nimport GridLoader from \"react-spinners/GridLoader\";\nimport axios from \"axios\";\nimport CurrentWeather from \"./CurrentWeather\";\nimport Forecast from './Forecast';\nimport \"./Search.css\";\nexport default function Search() {\n  var override = {\n    display: \"block\",\n    margin: \"0 auto\",\n    position: \"relative\",\n    top: \"50%\",\n    transform: \"translateY(-50%)\"\n  };\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      input = _useState2[0],\n      setInput = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      city = _useState4[0],\n      setCity = _useState4[1];\n\n  var _useState5 = useState(\"metric\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      units = _useState6[0],\n      setUnits = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loaded = _useState8[0],\n      setLoaded = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      weatherData = _useState10[0],\n      setWeatherData = _useState10[1];\n\n  function showWeatherData(response) {\n    console.log(\"you made current weather api request\");\n    setWeatherData({\n      coordinates: response.data.coord,\n      name: response.data.name,\n      temperature: response.data.main.temp,\n      wind: response.data.wind.speed,\n      temp_min: response.data.main.temp_min,\n      temp_max: response.data.main.temp_max,\n      timezone: response.data.timezone,\n      icon: response.data.weather[0].icon,\n      description: response.data.weather[0].description\n    });\n    setLoaded(true);\n  }\n\n  function getWeatherData() {\n    var apiKey = \"c558530bb05c403b5dd2f204254ec041\";\n    var apiUrl = \"https://api.openweathermap.org/data/2.5/weather?q=\".concat(city, \"&appid=\").concat(apiKey, \"&units=metric\");\n    axios.get(apiUrl).then(showWeatherData);\n    axios.get(apiUrl).catch(function (data, status) {\n      alert(\"Please enter correct city\");\n      setLoaded(false);\n    });\n  }\n\n  function showCity(response) {\n    setCity(response.data.city);\n  }\n\n  function showCurrentLocation() {\n    var apiKey = \"RwmHPc7UO6BPu8h9UQkb\";\n    var apiUrl = \"https://extreme-ip-lookup.com/json/?key=\".concat(apiKey);\n    axios.get(apiUrl).then(showCity);\n    axios.get(apiUrl).catch(function (data, status) {\n      console.log(\"Something went wrong\");\n    });\n  }\n\n  function updateInput(event) {\n    setInput(event.target.value);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    setCity(input);\n    setInput('');\n  }\n\n  function handleCurrentLocation(event) {\n    event.preventDefault();\n    showCurrentLocation();\n  }\n\n  function showFahrenheit(event) {\n    event.preventDefault();\n    setUnits(\"imperial\");\n  }\n\n  function showCelsius(event) {\n    event.preventDefault();\n    setUnits(\"metric\");\n  }\n\n  useEffect(function () {\n    setTimeout(function () {\n      if (city != null) {\n        getWeatherData();\n      } else {\n        showCurrentLocation();\n      }\n    }, 500);\n  }, [city]);\n\n  if (loaded) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"searchBox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"scale\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/\",\n      onClick: showFahrenheit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    }, \"\\xB0F\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }\n    }, \" | \"), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/\",\n      onClick: showCelsius,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }, \"\\xB0C\")), /*#__PURE__*/React.createElement(\"form\", {\n      autoComplete: \"off\",\n      onSubmit: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"searchField\",\n      type: \"text\",\n      placeholder: \"Enter the city\",\n      onChange: updateInput,\n      value: input,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"searchButton\",\n      type: \"submit\",\n      value: \"Search\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/\",\n      onClick: handleCurrentLocation,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }\n    }, \"Show current location weather\"))), /*#__PURE__*/React.createElement(CurrentWeather, {\n      weather: weatherData,\n      units: units,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(Forecast, {\n      coordinates: weatherData.coordinates,\n      units: units,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 7\n      }\n    }));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: \"100%\",\n        height: \"100vh\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(GridLoader, {\n      color: \"#a8d3f7\",\n      loading: true,\n      cssOverride: override,\n      size: 30,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 5\n      }\n    }));\n  }\n}","map":{"version":3,"names":["React","useState","CSSProperties","useEffect","GridLoader","axios","CurrentWeather","Forecast","Search","override","display","margin","position","top","transform","input","setInput","city","setCity","units","setUnits","loaded","setLoaded","weatherData","setWeatherData","showWeatherData","response","console","log","coordinates","data","coord","name","temperature","main","temp","wind","speed","temp_min","temp_max","timezone","icon","weather","description","getWeatherData","apiKey","apiUrl","get","then","catch","status","alert","showCity","showCurrentLocation","updateInput","event","target","value","handleSubmit","preventDefault","handleCurrentLocation","showFahrenheit","showCelsius","setTimeout","width","height"],"sources":["/Users/anastasiia/Documents/GitHub/weather-app/src/Search.js"],"sourcesContent":["import React, {useState, CSSProperties, useEffect } from 'react';\nimport GridLoader from \"react-spinners/GridLoader\";\nimport axios from \"axios\";\nimport CurrentWeather from \"./CurrentWeather\";\nimport Forecast from './Forecast';\nimport \"./Search.css\";\n\n\n\nexport default function Search() {\n  const override: CSSProperties = {\n    display: \"block\",\n    margin: \"0 auto\",\n    position: \"relative\",\n    top: \"50%\",\n    transform: \"translateY(-50%)\"\n  };\n  let [input, setInput] = useState('');\n  let [city, setCity] = useState(null);\n  let [units, setUnits] = useState(\"metric\");\n  let [loaded, setLoaded] = useState(false);\n  let [weatherData, setWeatherData] = useState(null);\n  function showWeatherData(response) {\n    console.log(\"you made current weather api request\");\n    setWeatherData({\n      coordinates: response.data.coord,\n      name: response.data.name,\n      temperature: response.data.main.temp,\n      wind: response.data.wind.speed,\n      temp_min: response.data.main.temp_min,\n      temp_max: response.data.main.temp_max,\n      timezone: response.data.timezone,\n      icon: response.data.weather[0].icon,\n      description: response.data.weather[0].description\n    });\n    setLoaded(true);\n  }\n  function getWeatherData(){\n    const apiKey = \"c558530bb05c403b5dd2f204254ec041\";\n    let apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;\n    axios.get(apiUrl).then(showWeatherData);\n    axios.get(apiUrl).catch((data,status)=>{\n      alert(\"Please enter correct city\");\n      setLoaded(false);\n    })\n  }\n  function showCity(response){\n    setCity(response.data.city);\n  }\n  function showCurrentLocation() {\n    let apiKey = `RwmHPc7UO6BPu8h9UQkb`;\n    let apiUrl = `https://extreme-ip-lookup.com/json/?key=${apiKey}`\n    axios.get(apiUrl).then((showCity));\n    axios.get(apiUrl).catch((data, status) => {\n      console.log(\"Something went wrong\");\n    });\n  }\n  function updateInput(event) {\n    setInput(event.target.value);\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    setCity(input);\n    setInput('');\n  }\n  function handleCurrentLocation(event){\n    event.preventDefault();\n    showCurrentLocation();\n  }\n  function showFahrenheit (event){\n    event.preventDefault();\n    setUnits(\"imperial\");\n  }\n  function showCelsius (event){\n    event.preventDefault();\n    setUnits(\"metric\");\n  }\n  useEffect(()=>{\n    setTimeout(()=>{\n      if(city!=null){\n        getWeatherData();\n      }else{\n        showCurrentLocation();\n      }\n    },500)   \n  }, [city])\n  if (loaded) {\n    return (\n    <div>\n      <div className=\"searchBox\">\n        <div className=\"scale\">\n          <a href=\"/\" onClick={showFahrenheit}>°F</a>\n          <span> | </span>\n          <a href=\"/\" onClick={showCelsius}>°C</a>\n        </div>\n        <form autoComplete=\"off\" onSubmit={handleSubmit}>\n          <input\n            className=\"searchField\"\n            type=\"text\"\n            placeholder=\"Enter the city\"\n            onChange={updateInput}\n            value={input}\n          />\n          <input className=\"searchButton\" type=\"submit\" value=\"Search\" />\n          <br />\n          <a href=\"/\" onClick={handleCurrentLocation}>Show current location weather</a>\n        </form>\n      </div>\n      <CurrentWeather weather={weatherData} units={units}/>\n      <Forecast coordinates={weatherData.coordinates} units={units}/>\n    </div>\n  );\n}else{\n  return <div style={{width:\"100%\", height:\"100vh\"}}>\n    <GridLoader color={\"#a8d3f7\"} loading={true} cssOverride={override} size={30} />\n    </div>\n}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}